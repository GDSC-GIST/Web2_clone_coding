{"ast":null,"code":"var _jsxFileName = \"/Users/yoonjae/GDSC/Web2_clone_coding/src/components/NweetFactory.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { fbStore, fbStorage } from '../fbase';\nimport { v4 as uuidv4 } from 'uuid';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NweetFactory = props => {\n  _s();\n\n  const [nweet, setNweet] = useState('');\n  const [attachment, setAttachment] = useState('');\n\n  const onSubmit = async event => {\n    if (nweet === '') {\n      return;\n    }\n\n    event.preventDefault();\n    let attachmentUrl = '';\n\n    if (attachment !== '') {\n      const attachmentRef = fbStorage.ref(fbStorage.getStorage(), `${props.userObj.uid}/${uuidv4()}`);\n      const response = await fbStorage.uploadString(attachmentRef, attachment, 'data_url');\n      attachmentUrl = await fbStorage.getDownloadURL(response.ref);\n    }\n\n    await fbStore.addDoc(fbStore.collection(fbStore.getFirestore(), 'nweets'), {\n      text: nweet,\n      createdAt: Date.now(),\n      creatorId: props.userObj.uid,\n      attachmentUrl\n    });\n    setNweet('');\n    setAttachment('');\n  };\n\n  const onChange = event => {\n    const {\n      target: {\n        value\n      }\n    } = event;\n    setNweet(value);\n  };\n\n  const onFileChange = event => {\n    // console.log(event.target.files);\n    const {\n      target: {\n        files\n      }\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = finishedEvent => {\n      const {\n        currentTarget: {\n          result\n        }\n      } = finishedEvent;\n      console.log(finishedEvent);\n      setAttachment(result);\n    };\n\n    reader.readAsDataURL(theFile);\n  };\n\n  const onClearAttachment = () => {\n    setAttachment('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    className: \"factoryForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"factoryInput__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"factoryInput__input\",\n        value: nweet,\n        onChange: onChange,\n        type: \"text\",\n        placeholder: \"What's on your mind?\",\n        maxLength: 120\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"\\u2192\",\n        className: \"factoryInput__arrow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      for: \"attach-file\",\n      className: \"factoryInput__label\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Add photos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faPlus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"attach-file\",\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: onFileChange,\n      style: {\n        opacity: 0\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), attachment && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"factoryForm__attachment\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: attachment,\n        alt: \"fig\",\n        style: {\n          backgroundImage: attachment\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"factoryForm__clear\",\n        onClick: onClearAttachment,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faTimes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NweetFactory, \"NlUKhtUXb39EDlht2Pm+5GyTQLY=\");\n\n_c = NweetFactory;\nexport default NweetFactory;\n\nvar _c;\n\n$RefreshReg$(_c, \"NweetFactory\");","map":{"version":3,"sources":["/Users/yoonjae/GDSC/Web2_clone_coding/src/components/NweetFactory.js"],"names":["React","useState","fbStore","fbStorage","v4","uuidv4","FontAwesomeIcon","faPlus","faTimes","NweetFactory","props","nweet","setNweet","attachment","setAttachment","onSubmit","event","preventDefault","attachmentUrl","attachmentRef","ref","getStorage","userObj","uid","response","uploadString","getDownloadURL","addDoc","collection","getFirestore","text","createdAt","Date","now","creatorId","onChange","target","value","onFileChange","files","theFile","reader","FileReader","onloadend","finishedEvent","currentTarget","result","console","log","readAsDataURL","onClearAttachment","opacity","backgroundImage"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {fbStore, fbStorage} from '../fbase';\nimport {v4 as uuidv4} from 'uuid';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faPlus, faTimes} from '@fortawesome/free-solid-svg-icons';\n\nconst NweetFactory = (props) => {\n  const [nweet, setNweet] = useState('');\n  const [attachment, setAttachment] = useState('');\n\n  const onSubmit = async (event) => {\n    if (nweet === '') {\n      return;\n    }\n    event.preventDefault();\n    let attachmentUrl = '';\n    if (attachment !== '') {\n      const attachmentRef = fbStorage.ref(fbStorage.getStorage(), `${props.userObj.uid}/${uuidv4()}`);\n      const response = await fbStorage.uploadString(attachmentRef, attachment, 'data_url');\n      attachmentUrl = await fbStorage.getDownloadURL(response.ref);\n    }\n    await fbStore.addDoc(fbStore.collection(fbStore.getFirestore(), 'nweets'), {\n      text: nweet,\n      createdAt: Date.now(),\n      creatorId: props.userObj.uid,\n      attachmentUrl,\n    });\n    setNweet('');\n    setAttachment('');\n  };\n\n  const onChange = (event) => {\n    const {\n      target: {value},\n    } = event;\n    setNweet(value);\n  };\n\n  const onFileChange = (event) => {\n    // console.log(event.target.files);\n    const {\n      target: {files},\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n    reader.onloadend = (finishedEvent) => {\n      const {\n        currentTarget: {result},\n      } = finishedEvent;\n      console.log(finishedEvent);\n      setAttachment(result);\n    };\n    reader.readAsDataURL(theFile);\n  };\n\n  const onClearAttachment = () => {\n    setAttachment('');\n  };\n\n  return (\n    <form onSubmit={onSubmit} className=\"factoryForm\">\n      <div className=\"factoryInput__container\">\n        <input className=\"factoryInput__input\" value={nweet} onChange={onChange} type=\"text\" placeholder=\"What's on your mind?\" maxLength={120} />\n        <input type=\"submit\" value=\"&rarr;\" className=\"factoryInput__arrow\" />\n      </div>\n      <label for=\"attach-file\" className=\"factoryInput__label\">\n        <span>Add photos</span>\n        <FontAwesomeIcon icon={faPlus} />\n      </label>\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={onFileChange}\n        style={{\n          opacity: 0,\n        }}\n      />\n      {attachment && (\n        <div className=\"factoryForm__attachment\">\n          <img\n            src={attachment}\n            alt=\"fig\"\n            style={{\n              backgroundImage: attachment,\n            }}\n          />\n          <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\n            <span>Remove</span>\n            <FontAwesomeIcon icon={faTimes} />\n          </div>\n        </div>\n      )}\n    </form>\n  );\n};\nexport default NweetFactory;\n"]},"metadata":{},"sourceType":"module"}